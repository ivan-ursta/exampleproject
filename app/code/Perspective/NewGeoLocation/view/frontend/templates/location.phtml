<?php
// Retrieve the selected city from cookie, or show default text.
$city = $block->getCookie('selected_city') ?: __('Your city');
?>
<div id="location-menu" style="cursor:pointer;">
    <i class="fa fa-map-marker" aria-hidden="true"></i>
    <span id="location-city"><?= $city ?></span>
</div>

<!-- Modal window for city selection -->
<div id="location-modal" style="display:none;">
    <div class="modal-content">
        <h2>Choose your city</h2>
        <p>Detected city: <span id="detected-city"></span></p>
        <p><a href="#" id="choose-another">Choose another</a></p>
        <!-- Dropdown for selecting a city will be populated dynamically -->
        <div class="city-dropdown" style="display:none;">
            <select id="city-select">
                <option value="">{{Please select}}</option>
            </select>
        </div>
        <!-- Error message block -->
        <div id="city-error" style="display:none;color:red;"></div>
    </div>
</div>

<script type="text/javascript">
    require(['Perspective_NewGeoLocation/js/location'], function(location) {
        location.init();
    });
</script>
